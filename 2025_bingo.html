<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TRTR Bingo Board</title>
<style>
  :root {
    --neon: #39ff14;
    --bg: #000000;
  }
  body {
    margin: 0;
    padding: 2rem;
    background: var(--bg);
    color: var(--neon);
    font-family: "Pretendard", "Noto Sans KR", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.2rem;
  }
  h1 {
    font-size: 2.5rem;
    letter-spacing: 0.15rem;
    text-shadow: 0 0 8px var(--neon);
  }
  .status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    max-width: 820px;
  }
  #bingo-count {
    font-size: 1.3rem;
    font-weight: 600;
    text-shadow: 0 0 6px var(--neon);
  }
  #reset-btn {
    background: transparent;
    color: var(--neon);
    border: 2px solid var(--neon);
    padding: 4px 12px;
    font-size: 0.9rem;
    cursor: pointer;
    text-shadow: 0 0 6px var(--neon);
  }
  #reset-btn:hover {
    background: var(--neon);
    color: var(--bg);
  }
  table {
    border-collapse: collapse;
  }
  td {
    position: relative;
    border: 2px solid var(--neon);
    width: 160px;
    height: 160px;
    padding: 0;
    text-align: center;
    vertical-align: middle;
    font-size: 0.9rem;
    transition: background 0.25s, color 0.25s;
  }
  td label {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 6px;
    cursor: pointer;
  }
  td label span {
    pointer-events: none;
    line-height: 1.3;
  }
  input[type="checkbox"] {
    display: none;
  }
  td.checked {
    background: var(--neon);
    color: var(--bg);
  }
  td.checked span {
    color: var(--bg);
    text-shadow: none;
  }
</style>
</head>
<body>
  <h1>TRTR BINGO</h1>
  <div class="status-bar">
    <div id="bingo-count">BINGO: 0</div>
    <button id="reset-btn">Reset</button>
  </div>
  <table id="bingo-table">
    <tr>
      <td><label><input type="checkbox"><span>벙 주최하기<br>(종류 무관)</span></label></td>
      <td><label><input type="checkbox"><span>솔로런 or<br>커플런</span></label></td>
      <td><label><input type="checkbox"><span>10km 러닝<br>(±100m)</span></label></td>
      <td><label><input type="checkbox"><span>정기런 2회 참석</span></label></td>
      <td><label><input type="checkbox"><span>TRTR 인스타<br>크루원 10명 맞팔</span></label></td>
    </tr>
    <tr>
      <td><label><input type="checkbox"><span>5.1km<br>(±100m)<br>or<br>510페이스<br>(±10초)</span></label></td>
      <td><label><input type="checkbox"><span>TRTR 인스타<br>출연</span></label></td>
      <td><label><input type="checkbox"><span>TRTR 스티커<br>붙이기</span></label></td>
      <td><label><input type="checkbox"><span>페이서 하기</span></label></td>
      <td><label><input type="checkbox"><span>60분 러닝<br>(±2분)</span></label></td>
    </tr>
    <tr>
      <td><label><input type="checkbox"><span>단톡방에 러닝 관련<br>정보 공유하기</span></label></td>
      <td><label><input type="checkbox"><span>마일리지<br>월 20km</span></label></td>
      <td><label><input type="checkbox"><span>정기런 포함<br>러닝관련 4회 참석</span></label></td>
      <td><label><input type="checkbox"><span>스쿼트 50개<br>(양심)</span></label></td>
      <td><label><input type="checkbox"><span>러닝 월 8회</span></label></td>
    </tr>
    <tr>
      <td><label><input type="checkbox"><span>GPS 아트 러닝<br>(제목짓기)</span></label></td>
      <td><label><input type="checkbox"><span>본인 인스타스토리에<br>TRTR 스토리 태그</span></label></td>
      <td><label><input type="checkbox"><span>벙 1회 참석</span></label></td>
      <td><label><input type="checkbox"><span>TRTR 인스타에<br>댓글 3개 달기</span></label></td>
      <td><label><input type="checkbox"><span>본인만의 회복 방법 공유</span></label></td>
    </tr>
    <tr>
      <td><label><input type="checkbox"><span>7km 러닝<br>(±100m)</span></label></td>
      <td><label><input type="checkbox"><span>마일리지<br>월 50km</span></label></td>
      <td><label><input type="checkbox"><span>러닝 후 뒷풀이<br>1회 참석</span></label></td>
      <td><label><input type="checkbox"><span>성남 외 타지역<br>러닝</span></label></td>
      <td><label><input type="checkbox"><span>러닝 외<br>운동 1회</span></label></td>
    </tr>
  </table>

<script>
  const STORAGE_KEY = 'trtrBingo';

  const checkboxes = Array.from(document.querySelectorAll('#bingo-table input[type="checkbox"]'));
  checkboxes.forEach((cb, idx) => cb.dataset.idx = idx);

  const lines = [
    [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14], [15,16,17,18,19], [20,21,22,23,24],
    [0,5,10,15,20], [1,6,11,16,21], [2,7,12,17,22], [3,8,13,18,23], [4,9,14,19,24],
    [0,6,12,18,24], [4,8,12,16,20]
  ];

  const bingoCountEl = document.getElementById('bingo-count');
  const resetBtn = document.getElementById('reset-btn');

  function loadState() {
    try {
      const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      saved.forEach(idx => {
        if (checkboxes[idx]) checkboxes[idx].checked = true;
      });
    } catch(e) {
      console.warn('Unable to load saved bingo state:', e);
    }
  }

  function saveState() {
    const checkedIndices = checkboxes.map((cb,i)=>cb.checked?i:null).filter(i=>i!==null);
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(checkedIndices));
    } catch(e) {
      console.warn('Unable to save bingo state:', e);
    }
  }

  function updateCellStyles() {
    checkboxes.forEach(cb => {
      cb.closest('td').classList.toggle('checked', cb.checked);
    });
  }

  function updateBingoCount() {
    const checked = new Set(checkboxes.map((cb, i) => cb.checked ? i : null).filter(i => i !== null));
    let count = 0;
    for (const line of lines) {
      if (line.every(idx => checked.has(idx))) count++;
    }
    bingoCountEl.textContent = `BINGO: ${count}`;
    saveState();
    updateCellStyles();
  }

  function resetBoard() {
    localStorage.removeItem(STORAGE_KEY);
    checkboxes.forEach(cb => cb.checked = false);
    updateBingoCount();
  }

  resetBtn.addEventListener('click', resetBoard);

  loadState();
  updateCellStyles();
  updateBingoCount();

  checkboxes.forEach(cb => cb.addEventListener('change', updateBingoCount));
</script>
</body>
</html>
